/*
  jQuery External Links Tracker Plugin
  Copyright (C) 2011 Paradigm New Media Group
  http://pnmg.com | http://github.com/pnmg/jquery-external-links-tracker
  GPL v2 license. See source file for more info.
*/
(function(a){a(document).ready(function(){var d=typeof console==="object"&&console.log;var b=typeof jQuery.fn.on!="undefined";var f=window.location.hostname;f=f.split(".");if(f.length==1){f=f[0]}else{if(f.length==4&&window.location.hostname.match(/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/)){f=window.location.hostname}else{if(f[0]=="www"){f.shift()}f=f.join(".")}}var c="http://"+f;var g="https://"+f;var e=function(k){if(d){console.log("tracker()")}var m=function(n){if(l.hasClass("newwindow")){n.preventDefault();window.open(j)}};var l=a(this);var j=l.attr("href");if(/^[\.\/].+$/.test(j)&&!/^\/\/.+/.test(j)){if(d){console.log("internal")}m(k)}else{if(j.substr(0,c.length)!=c&&j.substr(0,g.length)!=g){if(d){console.log("external")}k.preventDefault();var h=j.replace(/^(http|https):\/\//,"").replace(/www\./i,"").replace(/\/\//g,"").replace(/\./gi,"_");var i="/outgoing/"+h;if(typeof(pageTracker)!="undefined"){pageTracker._trackPageview(i);if(d){console.log("Tracked external link: "+i)}}else{if(typeof(_gat)=="object"){_gaq.push(["_trackPageview",i]);if(d){console.log("Tracked external link: "+i)}}else{if(d){console.log("Could not track external link: "+i)}}}window.open(j)}else{if(d){console.log("internal 2")}m(k)}}};var b=false;if(b){if(d){console.log("using .on()")}a("a[href]").on("click",e)}else{if(d){console.log("using .delegate()")}a("body").delegate("a[href]","click",e)}})})(jQuery);